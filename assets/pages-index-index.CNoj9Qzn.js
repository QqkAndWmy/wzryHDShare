import{a as e,r as t,s,h as a,j as i,b as l,c,w as n,i as o,o as r,d,e as u,k as h,l as m,m as f,F as y,t as p,p as g,q as k,I as _,g as x}from"./index-CfD7BLiY.js";import{F as w}from"./FloatingCustomerService.BHZgwF36.js";import{_ as C}from"./_plugin-vue_export-helper.BCo6x5W8.js";const I=C({components:{FloatingCustomerService:w},data:()=>({categoriesWithItems:[],searchKeyword:"",isSearching:!1,searchResults:[],customImage:"https://i.ibb.co/vxFMLJ4m/image.jpg",customText:"\nÂæÆ‰ø°: xkamy_xin\n ÂÖ¨‰ºóÂè∑: Â∞èÂáØÁà±ÁºñÁ®ã\nÈ∫ªÁÉ¶ÂêÑ‰ΩçÂÖ≥Ê≥®‰∏Ä‰∏ãÂÖ¨‰ºóÂè∑,Ë∞¢Ë∞¢üôè",title:"ÈóÆÈ¢òÂèçÈ¶à"}),onLoad(){this.fetchAllResources()},methods:{async fetchAllResources(){e({title:"Âä†ËΩΩ‰∏≠..."});try{const e=(await t({url:"http://cardKey.xkamy.xin:9876/api/resource/getEnabledCategoriesWithItems",method:"POST"})).data;"success"===e.status?this.categoriesWithItems=e.data||[]:s({title:e.info||"Ëé∑ÂèñËµÑÊ∫êÂ§±Ë¥•",icon:"none"})}catch(i){console.error("Ëé∑ÂèñËµÑÊ∫êÂàóË°®Â§±Ë¥•:",i),s({title:"ÁΩëÁªúÈîôËØØÊàñËØ∑Ê±ÇÂ§±Ë¥•",icon:"none"})}finally{a()}},async handleSearch(){if(!this.searchKeyword.trim())return this.isSearching=!1,void(this.searchResults=[]);e({title:"ÊêúÁ¥¢‰∏≠..."});try{const e=(await t({url:"http://cardKey.xkamy.xin:9876/api/resource/searchItems",method:"POST",data:{keyword:this.searchKeyword.trim()}})).data;"success"===e.status?(this.searchResults=e.data||[],this.isSearching=!0):(s({title:e.info||"ÊêúÁ¥¢Â§±Ë¥•",icon:"none"}),this.searchResults=[])}catch(i){console.error("ÊêúÁ¥¢Â§±Ë¥•:",i),s({title:"ÁΩëÁªúÈîôËØØÊàñËØ∑Ê±ÇÂ§±Ë¥•",icon:"none"}),this.searchResults=[]}finally{a()}},openLink(e){i({url:`/pages/webview/webview?url=${encodeURIComponent(e)}`})}}},[["render",function(e,t,s,a,i,w){const C=k,I=_,S=x,b=o,R=l("FloatingCustomerService");return r(),c(b,{class:"container"},{default:n((()=>[d(C,{class:"category-title"},{default:n((()=>[u("ÈúÄË¶ÅÂÖ∂‰ªñÂêÑÁßçËµÑÊ∫êÂèØ‰ª•Áõ¥Êé•ËÅîÁ≥ªÊàë,v: xkamy_xin,ÊàñËÄÖÂè≥‰∏ãËßíÊâ´Á†ÅÂÖ≥Ê≥®")])),_:1}),h("hr"),h("br"),d(b,{class:"search-section"},{default:n((()=>[d(I,{modelValue:i.searchKeyword,"onUpdate:modelValue":t[0]||(t[0]=e=>i.searchKeyword=e),type:"text",placeholder:"ÊêúÁ¥¢ËµÑÊ∫ê...",class:"search-input",onConfirm:w.handleSearch},null,8,["modelValue","onConfirm"]),d(S,{onClick:w.handleSearch,class:"search-btn"},{default:n((()=>[u("ÊêúÁ¥¢")])),_:1},8,["onClick"])])),_:1}),i.isSearching?(r(),c(b,{key:1},{default:n((()=>[d(C,{class:"search-result-title"},{default:n((()=>[u("ÊêúÁ¥¢ÁªìÊûú ("+p(i.searchResults.length)+")",1)])),_:1}),d(b,{class:"item-list"},{default:n((()=>[(r(!0),m(y,null,f(i.searchResults,(e=>(r(),c(b,{key:e.id,class:"item-card",onClick:t=>w.openLink(e.link)},{default:n((()=>[d(C,{class:"item-title"},{default:n((()=>[u(p(e.title),1)])),_:2},1024),e.description?(r(),c(C,{key:0,class:"item-desc"},{default:n((()=>[u(p(e.description),1)])),_:2},1024)):g("",!0),d(C,{class:"item-link"},{default:n((()=>[u(p(e.link),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),0===i.searchResults.length?(r(),c(b,{key:0,class:"empty-search"},{default:n((()=>[u(" Êú™ÊâæÂà∞Áõ∏ÂÖ≥ËµÑÊ∫ê ")])),_:1})):g("",!0)])),_:1})])),_:1})):(r(),c(b,{key:0},{default:n((()=>[(r(!0),m(y,null,f(i.categoriesWithItems,((e,t)=>(r(),c(b,{key:e.category.id,class:"category-section"},{default:n((()=>[d(C,{class:"category-title"},{default:n((()=>[u(p(e.category.name),1)])),_:2},1024),d(b,{class:"item-list"},{default:n((()=>[(r(!0),m(y,null,f(e.items,(e=>(r(),c(b,{key:e.id,class:"item-card",onClick:t=>w.openLink(e.link)},{default:n((()=>[d(C,{class:"item-title"},{default:n((()=>[u(p(e.title),1)])),_:2},1024),e.description?(r(),c(C,{key:0,class:"item-desc"},{default:n((()=>[u(p(e.description),1)])),_:2},1024)):g("",!0),d(C,{class:"item-link"},{default:n((()=>[u(p(e.link),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),0===e.items.length?(r(),c(b,{key:0,class:"empty-category"},{default:n((()=>[u(" ÊöÇÊó†ËµÑÊ∫ê ")])),_:1})):g("",!0)])),_:2},1024)])),_:2},1024)))),128))])),_:1})),d(R,{imagePath:i.customImage,title:i.title,"text-content":i.customText,buttonIcon:e.buttonIcon},null,8,["imagePath","title","text-content","buttonIcon"])])),_:1})}],["__scopeId","data-v-43a5cff2"]]);export{I as default};
